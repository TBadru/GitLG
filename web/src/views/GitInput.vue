<template lang="slm">
div.col.gap-10
	promise-form.col.gap-5 :action="execute"
		.row.align-center.gap-10
			code git 
			input.command v-model="command"
		.input-controls.justify-flex-end.align-center.gap-10
			div v-if="text_changed"
				| Edited
			button.btn.btn-2 type="button" v-if="text_changed" @click="reset_command()"
				| â†º Reset
			div v-if="is_saved && ! has_unsaved_changes"
				| Saved
			button.btn.btn-2 type="button" v-if="has_unsaved_changes" @click="save()"
				| ðŸ–« Save
		.param v-for="(param, i) in params"
			label.row.align-center.gap-5
				| Param \${{ i+1 }}
				input v-model="params[i]"
		div
			button.btn
				| âœ“ Execute
	.error-response.padding-l v-if="error"
		| Command failed: 
		| {{ error }}
	.success-response.padding-l v-if="data"
		| Successful result:<br>
		| {{ data }}
	div v-if="options.length"
		div Common options
		ul.options
			li v-for="option of options" :class="{changed: option.value !== option.default}"
				label.row.align-center.gap-5
					input type="checkbox" v-model="option.value" :disabled="text_changed"
					| {{ option.name }}
</template>

<script lang="coffee" src="./GitInput.coffee"></script>

<style lang="stylus">
.options
	.changed
		border-left 2px solid #bc9550 // like vscode settings ui
.error-response, .success-response
	white-space pre-wrap
.param
	white-space pre
.error-response
	color #e53c3c
</style>